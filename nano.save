diff --git a/Dockerfile b/Dockerfile index 426b00d..1edeb17 100644 --- a/Dockerfile +++ 
b/Dockerfile @@ -1,4 +1,8 @@ -FROM nginx:mainline-alpine +FROM node:8.12.0-alpine
 LABEL maintainer="Kane Valentine <kane.valentine@shuppet.com>"
 
-CMD ["nginx"] +WORKDIR /opt/shuppet.com/ +ADD ${PWD} ${PWD} + +RUN npm install +CMD ["npm", 
"start"] diff --git a/gulpfile.babel.js b/gulpfile.babel.js index abe53b7..e9a9291 100644 --- 
a/gulpfile.babel.js +++ b/gulpfile.babel.js @@ -7,12 +7,9 @@ import flatten from 
"gulp-flatten";
 import postcss from "gulp-postcss";
 import cssImport from "postcss-import";
 import cssnext from "postcss-cssnext"; -import BrowserSync from "browser-sync";
 import webpack from "webpack";
 import webpackConfig from "./webpack.conf";
 
-const browserSync = BrowserSync.create(); -
 // Hugo arguments
 const hugoArgsDefault = ["-d", "../dist", "-s", "site", "-v"];
 const hugoArgsPreview = ["--buildDrafts", "--buildFuture"]; @@ -34,7 +31,6 @@ 
gulp.task("css", () => (
   gulp.src("./src/css/*.css")
     .pipe(postcss([cssImport({from: "./src/css/main.css"}), cssnext()]))
     .pipe(gulp.dest("./dist/css")) - .pipe(browserSync.stream())
 ));
 
 // Compile Javascript @@ -47,7 +43,6 @@ gulp.task("js", (cb) => {
       colors: true,
       progress: true
     })}`);
- browserSync.reload();
     cb();
   });
 });
@@ -57,16 +52,9 @@ gulp.task('fonts', () => (
   gulp.src("./src/fonts/**/*")
     .pipe(flatten())
     .pipe(gulp.dest("./dist/fonts")) - .pipe(browserSync.stream())
 ));
 
-// Development server with browsersync
 function runServer() { - browserSync.init({ - server: { - baseDir: "./dist" - } - });
   gulp.watch("./src/js/**/*.js", ["js"]);
   gulp.watch("./src/css/**/*.css", ["css"]);
   gulp.watch("./src/fonts/**/*", ["fonts"]); @@ -83,10 +71,8 @@ function buildSite(cb, 
options, environment = "development") {
 
   return spawn(hugoBin, args, {stdio: "inherit"}).on("close", (code) => {
     if (code === 0) { - browserSync.reload();
       cb();
     } else {
- browserSync.notify("Hugo build failed :(");
       cb("Hugo build failed");
     }
   });
diff --git a/package.json b/package.json index e9dcdb9..44af330 100644 --- a/package.json +++ 
b/package.json @@ -24,7 +24,6 @@
     "babel-plugin-transform-object-rest-spread": "^6.8.0",
     "babel-preset-env": "^1.6.1",
     "babel-register": "^6.11.6", - "browser-sync": "^2.23.7",
     "css-loader": "^1.0.0",
     "eslint": "^4.19.1",
     "eslint-plugin-import": "^2.11.0", diff --git a/webpack.conf.js b/webpack.conf.js index 
69660c8..4184b09 100644 --- a/webpack.conf.js +++ b/webpack.conf.js @@ -18,6 +18,7 @@ export 
default {
     ]
   },
 
+ mode: 'production',
   plugins: [
     new webpack.ProvidePlugin({
       "fetch": "imports-loader?this=>global!exports-loader?global.fetch!whatwg-fetch"
